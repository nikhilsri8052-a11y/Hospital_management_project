{% extends "base.html" %}

{% block content %}

<div class="topic">
  <h1 style="text-align:center; margin-top:30px;">My Profile</h1>
</div>

<div class="privacy-container">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash-message {{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <h2 style="text-align:center; margin-bottom:20px;">Welcome, {{ patient.name }}</h2>
  
  <div class="patient-info-card">
    <h3>Personal Information</h3>
    <div class="info-grid">
      <div class="info-item">
        <strong>Name:</strong> {{ patient.name }}
      </div>
      <div class="info-item">
        <strong>Email:</strong> {{ patient.email }}
      </div>
      <div class="info-item">
        <strong>Phone:</strong> {{ patient.phone }}
      </div>
      <div class="info-item">
        <strong>Age:</strong> {{ patient.age }}
      </div>
      <div class="info-item">
        <strong>Gender:</strong> {{ patient.gender }}
      </div>
      <div class="info-item">
        <strong>Date of Birth:</strong> {{ patient.dob.strftime('%Y-%m-%d') if patient.dob else 'Not specified' }}
      </div>
      <div class="info-item">
        <strong>Blood Group:</strong> {{ patient.blood_group or 'Not specified' }}
      </div>
      <div class="info-item full-width">
        <strong>Address:</strong> {{ patient.address or 'Not specified' }}
      </div>
    </div>
  </div>
  {% if patient.emergency_contact_name or patient.emergency_contact_phone %}
  <div class="patient-info-card">
    <h3>Emergency Contact</h3>
    <div class="info-grid">
      {% if patient.emergency_contact_name %}
      <div class="info-item">
        <strong>Contact Name:</strong> {{ patient.emergency_contact_name }}
      </div>
      {% endif %}
      {% if patient.emergency_contact_phone %}
      <div class="info-item">
        <strong>Contact Phone:</strong> {{ patient.emergency_contact_phone }}
      </div>
      {% endif %}
    </div>
  </div>
  {% endif %}
  <div class="patient-actions">
    <a href="{{ url_for('update_profile') }}">
      <button class="btn-primary">Update Profile</button>
    </a>
    <a href="{{ url_for('patient_change_pass') }}">
      <button class="btn-primary">Change Password</button>
    </a>
    <a href="{{ url_for('logout') }}">
      <button class="btn-secondary">Logout</button>
    </a>
  </div>
</div>
{% endblock %}